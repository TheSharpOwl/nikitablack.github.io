<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <title>Call a function from the string name and arguments</title>
    <meta name="description" content="" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="//nikitablack.github.io/themes/Roon/favicon.ico">

    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:400,700,400italic,700italic|Open+Sans:400italic,700italic,700,400">
    <link rel="stylesheet" type="text/css" href="//nikitablack.github.io/themes/Roon/assets/css/screen.css?v=1.0.0" />

    <link rel="canonical" href="https://nikitablack.github.io/2016/02/21/Call-a-function-from-the-string-name-and-arguments.html" />
    
    <meta property="og:site_name" content="Simply about complex" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Call a function from the string name and arguments" />
    <meta property="og:description" content="Recently I had an interesting task on my work - a cheat system for a game. All the system should do is to call functions during apllication run with console commands (game console). Functions can accept different number of arguments..." />
    <meta property="og:url" content="https://nikitablack.github.io/2016/02/21/Call-a-function-from-the-string-name-and-arguments.html" />
    <meta property="article:published_time" content="2016-02-20T23:00:00.000Z" />
    <meta property="article:modified_time" content="2016-03-03T09:42:28.408Z" />
    <meta property="article:tag" content="c++" />
    
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Call a function from the string name and arguments" />
    <meta name="twitter:description" content="Recently I had an interesting task on my work - a cheat system for a game. All the system should do is to call functions during apllication run with console commands (game console). Functions can accept different number of arguments..." />
    <meta name="twitter:url" content="https://nikitablack.github.io/2016/02/21/Call-a-function-from-the-string-name-and-arguments.html" />
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "Simply about complex",
    "author": {
        "@type": "Person",
        "name": "nikitablack",
        "image": "https://avatars.githubusercontent.com/u/6390092?v=3",
        "url": "undefined/author/undefined",
        "sameAs": "https://nikitablack.github.io"
    },
    "headline": "Call a function from the string name and arguments",
    "url": "https://nikitablack.github.io/2016/02/21/Call-a-function-from-the-string-name-and-arguments.html",
    "datePublished": "2016-02-20T23:00:00.000Z",
    "dateModified": "2016-03-03T09:42:28.408Z",
    "keywords": "c++",
    "description": "Recently I had an interesting task on my work - a cheat system for a game. All the system should do is to call functions during apllication run with console commands (game console). Functions can accept different number of arguments..."
}
    </script>

    <meta name="generator" content="Ghost ?" />
    <link rel="alternate" type="application/rss+xml" title="Simply about complex" href="https://nikitablack.github.io/rss" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/default.min.css">
</head>
<body class="post-template tag-c  noimage">

    


    <article role="main" class="">
        <header>
            <a href="https://nikitablack.github.io" id="home_link">Â«</a>
            <div class="meta"><time datetime="2016-02-21"><a href="/2016/02/21/Call-a-function-from-the-string-name-and-arguments.html">February 21, 2016</a></time> <span class="count" id="js-reading-time"></span></div>
            <h1>Call a function from the string name and arguments</h1>
        </header>

        <div class="text" id="js-post-content">
            <div class="paragraph">
<p>Recently I had an interesting task on my work - a cheat system for a game. All the system should do is to call functions during apllication run with console commands (game console). Functions can accept different number of arguments with different types. In other words the system should be able to call a function:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">bool foo(int, float);</code></pre>
</div>
</div>
<div class="paragraph">
<p>with a console command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>foo 42 10.5</pre>
</div>
</div>
<div class="paragraph">
<p>I&#8217;ll not describe how I&#8217;m receiving this string as well how I&#8217;m parsing it. Let&#8217;s assume that we&#8217;re operating with a vector of strings where the first element - the name of the function and the rest - function parameters. So at some point er have this vector:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">{ "foo", "42", "10.5" }</code></pre>
</div>
</div>
<div class="paragraph">
<p>And we need somehow call a correct function and pass a correct number of parameters with a correct type.</p>
</div>
<div class="paragraph">
<p>There&#8217;s no way to call an unknown function just knowing it&#8217;s name in C++. At least I don&#8217;t know such a way. So in order to call something we first need register it. By registration I mean storing of a function pointer together with it&#8217;s name. The <code>std::map</code> is a good candidate for that. But I don&#8217;t store raw pointer. Instead, I have a wrapper class, called <code>Cheat</code>, for my function. Cheat is a templated class with function arguments types as template parameters. It&#8217;s declaration looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">template&lt;typename ...Args&gt;
class Cheat : public CheatBase
{
	Cheat(void(* const funcPtr)(Args...)) : func{ funcPtr }
	{

	}
	// ...
private:
	void(* const func)(Args...); <i class="conum" data-value="1"></i><b>(1)</b>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here <code>func</code> is our pointer to function which we need to call later.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For simplcity the only functions that can be passed are global or static functions or lambdas without capture (such a lambda can be casted to function pointer). But member functions can be added with additional template argument and a little bit of code.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>As you already guessed, it&#8217;s not possible to store instances of this class directly in <code>std::map</code> because for every new function with a new signature the <code>Cheat</code> class type will be different. For example <code>Cheat&lt;int&gt;</code> for the function taking one <code>int</code> parameter and  <code>Cheat&lt;int, float&gt;</code> for the function takind an <code>int</code> and a <code>float</code>. Therefore they all should have common base class. It&#8217;s very simple:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">class CheatBase
{
public:
	virtual ~CheatBase() {};
	virtual bool call(const std::vector&lt;std::string&gt;&amp; cheatParams) = 0;
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>It&#8217;s an abstract class with pure virtual function which takes an array of parameters as strings which will be converted to corresponding types.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Instead of <code>call()</code> function we could use <code>operator()</code> function.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now we can create cheats like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">CheatBase* cheat{new Cheat&lt;int, float&gt;};</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or with a helper:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">template&lt;typename ...Args&gt;
std::shared_ptr&lt;CheatBase&gt; makeCheat(void(*funcPtr)(Args... arguments))
{
	return std::make_shared&lt;Cheat&lt;Args...&gt;&gt;(funcPtr);
}

myMap["foo"] = makeCheat(&amp;foo);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Thanks to type deduction we don&#8217;t need to type template parameters for the function.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Here for simplcity I&#8217;m passing arguments by value. The better approach is to use <a href="http://en.cppreference.com/w/cpp/utility/forward">perfect forwarding</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Btw, the strange looking <code>template&lt;typename &#8230;&#8203;Args&gt;</code> is called a <a href="http://en.cppreference.com/w/cpp/language/parameter_pack">parameter pack</a>. And together with templated class it&#8217;s called <strong>variadic template</strong>. This is one of the amazing features of modern C++. I highly recommend you to investigate this topic. It&#8217;s really really cool! I can recommend for the start this great posts - <a href="http://eli.thegreenplace.net/2014/variadic-templates-in-c/">one</a>, <a href="https://jguegant.github.io/blogs/tech/thread-safe-multi-type-map.html">two</a>.</p>
</div>
<div class="paragraph">
<p>That was pretty standard and boring. And now the interesting part - the actual cheat implementation!</p>
</div>
<div class="paragraph">
<p>The heart of the <code>Cheat</code> class is a <code>call()</code> function override:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">bool call(const std::vector&lt;std::string&gt;&amp; cheatParams) override
{
	if (sizeof...(Args) != cheatParams.size()) <i class="conum" data-value="1"></i><b>(1)</b>
	{
		// if a number of passed arguments is not equal to a number of parameters declared in cheat return false - this is an error.
		return false;
	}

	callHelper(cheatParams, std::index_sequence_for&lt;Args...&gt;{});

	return true;
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><a href="http://en.cppreference.com/w/cpp/language/sizeof&#8230;&#8203;"><code>sizeof&#8230;&#8203;(Args)</code></a> return a number of arguments of the parameter pack that was used during <code>Cheat</code> class instantiation.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>First we check that we passed correct number of arguments. In the number is wrong simply do nothing and return. And all the magic happens in <code>callHelper()</code> function. Don&#8217;t think about <code>index_sequence_for&lt;Args&#8230;&#8203;&gt;</code> for now, we&#8217;ll come to this later:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">template &lt;std::size_t... Idx&gt;
void callHelper(const std::vector&lt;std::string&gt;&amp; strArgs, std::index_sequence&lt;Idx...&gt;)
{
	(func)(fromString&lt;Args&gt;(getStringFromArray&lt;Idx&gt;(strArgs))...);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Wow! Looks scary. Actually, not. <code>callHelper()</code> is a variadic templated function which accepts a vector with string arguments (and which should be converted to appropriate types) and a <a href="http://en.cppreference.com/w/cpp/utility/integer_sequence">sequence of integers</a>. What are this integers? Why? I can better explain it if we&#8217;ll start from the end. Let&#8217;s stick to <code>foo(int, type)</code> function signature for the rest of this post.</p>
</div>
<div class="paragraph">
<p>In the very very end I need to call this function with correct parameters, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">foo(42, 10.5);</code></pre>
</div>
</div>
<div class="paragraph">
<p>But I have only a vector of strings <code>{"42", "10.5"}</code>. I need some conversion function that will return a correct type from the corresponding string. Moreover I need to call this function several times - once for each parameter. Let&#8217;s call this conversion function <code>fromString</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">foo(fromString("42"), fromString("10.5"));</code></pre>
</div>
</div>
<div class="paragraph">
<p>In order to convert to correct type we&#8217;ll use templated function with overload for <strong>every</strong> type I need. For the case with <code>int</code> the overload is (for the <code>float</code> it&#8217;s similar, just replace <code>int</code> to <code>float</code> and <code>std::stoi()</code> to <code>std::stof()</code>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">template&lt;typename T&gt;
typename std::enable_if&lt;std::is_same&lt;T, int&gt;::value, int&gt;::type fromString(const std::string&amp; str)
{
	return std::stoi(str);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <a href="http://en.cppreference.com/w/cpp/language/sfinae">SFINAE</a> technique is used here. Good explanation of what it is can be found <a href="http://www.bfilipek.com/2016/02/notes-on-c-sfinae.html">in this awesome blog</a>. In short - <code>std::is_same&lt;T, int&gt;::value</code> will return <code>true</code> if <code>T</code> is <code>int</code> and <code>false</code> overwise. Next, <code>std::enable_if&lt;true, int&gt;::type</code> will return <code>int</code> and <code>std::enable_if&lt;false, int&gt;::type</code> simply will not compile. After substitution we&#8217;ll have:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">template&lt;int&gt;
int fromString(const std::string&amp; str)
{
	return std::stoi(str);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And additional feature of it is that we&#8217;ll get a <strong>compile time</strong> error if we&#8217;ll use a type for which there&#8217;s no overload exist! Awesome, this type of error is much much better than an exception during runtime.</p>
</div>
<div class="paragraph">
<p>Having all this we can create a first version of our <code>callHelper()</code> function:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">void callHelper(const std::vector&lt;std::string&gt;&amp; strArgs)
{
	foo(fromString&lt;Args&gt;(getStringFromArray(strArgs))...);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you remember, <code>Args</code> is a parameter pack. And <code>fromString&lt;Args&gt;()&#8230;&#8203;</code> is a parameter pack expansion. There&#8217;re <a href="http://en.cppreference.com/w/cpp/language/parameter_pack#Pack_expansion">strict rules</a> how parameter pack is expanded. For our case with <code>int</code> and <code>float</code> it will be expanded to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">void callHelper(const std::vector&lt;std::string&gt;&amp; strArgs)
{
	foo(fromString&lt;int&gt;(getStringFromArray(strArgs)), fromString&lt;float&gt;(getStringFromArray(strArgs)));
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We already have two <code>fromString()</code> overloads for our types. Now the trick is to pass the correct string from the vector to them, i.e. implement <code>getStringFromArray()</code> function. The naive approach would be to remove <code>getStringFromArray()</code> completely and just use <code>strArgs</code> vector together with some counter which will be incremented every time we access a vector element:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">void callHelper(const std::vector&lt;std::string&gt;&amp; strArgs)
{
	size_t counter{0};
	foo(fromString&lt;int&gt;(strArgs[counter++], fromString&lt;float&gt;(strArgs[counter++]));
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Unfortunately this will not work. The C++ standard does not specify the <a href="http://en.cppreference.com/w/cpp/language/eval_order">order of function arguments eveluation</a>. That means it can differ from compiler to compiler. And it&#8217;s absolutelly possible to have this setup (remember - we have <code>{ "42", "10.5" }</code> in our vector):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">foo(fromString&lt;int&gt;(strArgs[1]), fromString&lt;float&gt;(strArgs[0])); // notice how we're passing wrong arguments</code></pre>
</div>
</div>
<div class="paragraph">
<p>We need instead a robust solution that will work across compilers. Let&#8217;s rewrite <code>callHelper</code> slightly:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">void callHelper(const std::vector&lt;std::string&gt;&amp; strArgs)
{
	foo(fromString&lt;int&gt;(getStringFromArray&lt;0&gt;(strArgs)), fromString&lt;float&gt;(getStringFromArray&lt;1&gt;(strArgs)));
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice the extra template parameters <code>&lt;0&gt;</code> and <code>&lt;1&gt;</code>. And here the definition of <code>getStringFromArray()</code> function:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">template &lt;std::size_t N&gt;
std::string getStringFromArray(const std::vector&lt;std::string&gt;&amp; strArgs)
{
	return strArgs[N];
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now no matter what is the evaluation order our function will return correct string, since <code>&lt;0&gt;</code> and <code>&lt;1&gt;</code> are template parameters and will always be in right sequence. And this order is guaranteed by <a href="http://en.cppreference.com/w/cpp/utility/integer_sequence">sequence of integers</a> that we will use. For the moment let&#8217;s not think how we create one but see what happens when the function receives it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">template &lt;std::size_t... Idx&gt;
void callHelper(const std::vector&lt;std::string&gt;&amp; strArgs, std::index_sequence&lt;Idx...&gt;)
{
	foo(fromString&lt;Args&gt;(getStringFromArray&lt;Idx&gt;(strArgs))...);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The function itself templated with <a href="http://en.cppreference.com/w/cpp/language/template_parameters#Non-type_template_parameter">non-type</a> parameter pack, in simple words the template parameters are integers and their number is equal to the number of <code>Args</code> (<code>Cheat</code> class parameter pack). This <code>Idx</code> sequence will be deduced from the function&#8217;s second unnamed argument <code>std::index_sequence&lt;Idx&#8230;&#8203;&gt;</code>. Do you see, we even don&#8217;t have the name for it, because we don&#8217;t use this parameter in the function&#8217;s body! The sole reason for this argument is to provide compile-time integers <code>&#8230;&#8203;Idx</code>. In the function&#8217;s body the two parameter packs - <code>Args</code> and <code>Idx</code> will be expanded together simultaneously according to <a href="http://en.cppreference.com/w/cpp/language/parameter_pack#Pack_expansion">aforementioned rules</a>. In our case everything will be expanded to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">template &lt;0, 1&gt; // this is deduced from the function's second argument
void callHelper(const std::vector&lt;std::string&gt;&amp; strArgs, std::index_sequence&lt;0, 1&gt;)
{
	foo(fromString&lt;int&gt;(getStringFromArray&lt;0&gt;(strArgs)), fromString&lt;float&gt;(getStringFromArray&lt;1&gt;(strArgs)));
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Amazing, isn&#8217;t it?</p>
</div>
<div class="paragraph">
<p>There&#8217;s a last piece of puzzle left - how to get this integer sequence? The bad news - in C++11 this should be done manually.  <a href="https://ngathanasiou.wordpress.com/2015/02/19/compile-time-integer-sequences">Here</a> the great explanation how to do this. And actually on my work I have to use this solution.</p>
</div>
<div class="paragraph">
<p>But the happy owners of C++14 compliant compiler (and me in this post) can use <a href="http://en.cppreference.com/w/cpp/utility/integer_sequence">standard sequence of integers</a>. I&#8217;ll put here explanation directly from the link:</p>
</div>
<div class="paragraph">
<p><em>
A helper alias template std::index_sequence_for is defined to convert any type parameter pack into an index sequence of the same length.
</em></p>
</div>
<div class="paragraph">
<p>In other words, <code>&lt;&#8230;&#8203;Args&gt;`which, for example, can be `&lt;int, float, std::string, double&gt;</code> will be converted to <code>std::index_sequence&lt;0, 1, 2, 3&gt;</code>.</p>
</div>
<div class="paragraph">
<p>Putting it all together we can call our helper like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">callHelper(cheatParams, std::index_sequence_for&lt;Args...&gt;{});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where, again, <code>Args&#8230;&#8203;</code> is a <code>Cheat</code> class parameter pack.</p>
</div>
<div class="paragraph">
<p>The source code together with usage example can be found <a href="https://github.com/nikitablack/cpp-tests/blob/master/StringArgsFunction/StringArgsFunction.cpp">here</a>.</p>
</div>
        </div>


        <footer class="post-footer" role="contentinfo">

            <div class="vcard">
                <!-- <a href="https://nikitablack.github.io/rss" id="btn_feed" class="btn" title="Feed" target="_blank">
                    <span aria-hidden="true" data-icon=")"></span>
                    <strong>Feed</strong>
                </a> -->

                <a href="" class="photo">
                    <span style="background-image: url('https://avatars.githubusercontent.com/u/6390092?v=3');">
                        <img src="https://avatars.githubusercontent.com/u/6390092?v=3" alt="nikitablack">
                    </span>
                </a>

                <div class="details">
                    <h4><a href="" class="url n">nikitablack</a></h4>
                    
                    <a href="https://nikitablack.github.io" class="js-remove-domain-schema">https://nikitablack.github.io</a>
                </div>
            </div>

            <div id="user_bio">
                <div class="inner">
                    
                </div>
            </div>

        </footer>




    <section class="post-comments">
      <div id="disqus_thread"></div>
      <script type="text/javascript">
      var disqus_shortname = 'nikitablack'; // required: replace example with your forum shortname
      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
      </script>
      <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
      <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </section>


    </article>

    <div id="share_modal">
        <div class="wrap">
            <div class="inner">
                <header>
                    Share
                    <a href="" class="close" title="Close">&times;</a>
                </header>

                <div class="roon-share-links">
                    <a href="https://twitter.com/share" class="twitter-share-button" data-dnt="true">Tweet</a>
                    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

                    <div id="fb-elems">
                        <div id="fb-root"></div>
                        <script>(function(d, s, id) {
                        var js, fjs = d.getElementsByTagName(s)[0];
                        if (d.getElementById(id)) return;
                        js = d.createElement(s); js.id = id;
                        js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=463438580397968";
                        fjs.parentNode.insertBefore(js, fjs);
                        }(document, 'script', 'facebook-jssdk'));</script>
                        <div class="fb-like" data-send="false" data-layout="button_count" data-width="110" data-show-faces="false" data-font="arial"></div>
                    </div>

                    <div id="pinit-btn">
                        <a href="//pinterest.com/pin/create/button/?url=https://nikitablack.github.io/2016/02/21/Call-a-function-from-the-string-name-and-arguments.html&amp;description=Call%20a%20function%20from%20the%20string%20name%20and%20arguments-Simply%20about%20complex " data-pin-do="buttonPin" data-pin-config="beside"><img src="//assets.pinterest.com/images/pidgets/pin_it_button.png"></a>
                        <script type="text/javascript" src="//assets.pinterest.com/js/pinit.js"></script>
                    </div>
                </div>
            </div>
        </div>
    </div>




        <a href="https://nikitablack.github.io" id="blog_badge">
            <span style="background-image: url('https://raw.githubusercontent.com/nikitablack/nikitablack.github.io/master/images/logo.jpg');">Simply about complex</span>
        </a>


    <script>

            function get_text(el) {
                ret = "";
                var length = el.childNodes.length;
                for(var i = 0; i < length; i++) {
                    var node = el.childNodes[i];
                    if(node.nodeType != 8) {
                        ret += node.nodeType != 1 ? node.nodeValue : get_text(node);
                    }
                }
                return ret;
            }
            function reading_time () {
                var post_content = document.getElementById('js-post-content');
                if (post_content) {
                    var words = get_text(post_content),
                        count = words.split(/\s+/).length,
                        read_time = Math.ceil((count / 150)),
                        read_time_node = document.createTextNode(read_time + ' min read');
                    document.getElementById('js-reading-time').appendChild(read_time_node);
                }
            }

        function no_schema_links () {
            var links = document.querySelectorAll('.js-remove-domain-schema');
            if (links) {
                for (i = 0; i < links.length; ++i) {
                    var link = links[i],
                        text = link.innerHTML,
                        no_schema = text.replace(/.*?:\/\//g, "");
                    link.innerHTML = no_schema;
                }
            }
        }

        window.onload = function () {
            no_schema_links();

            reading_time();
        }
    </script>

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment-with-locales.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js?v="></script> 
      <script type="text/javascript">
        jQuery( document ).ready(function() {
          // change date with ago
          jQuery('ago.ago').each(function(){
            var element = jQuery(this).parent();
            element.html( moment(element.text()).fromNow());
          });
        });

        hljs.initHighlightingOnLoad();      
      </script>

        <script>
            $(function(){
                var share_modal = $("#share_modal"),
                    update_social_links = true;

                $("#btn_share").click(function(){
                    var that = $(this);
                    share_modal.fadeIn(200);
                    return false;
                });

                share_modal.click(function(e){
                    if (e.target.className == "wrap" || e.target.id == "share_modal") {
                        share_modal.fadeOut(200);
                    }
                    return false;
                });

                share_modal.find("div.inner > header > a.close").click(function(){
                    share_modal.fadeOut(200);
                    return false;
                });
            });
        </script>


    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-69402602-2', 'auto');
    ga('send', 'pageview');

    </script>

</body>
</html>
